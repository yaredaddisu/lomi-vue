import{c as B,w as k,v as L,u as e,b as l,d as u,e as i,f as n,_ as K,g as V,h as Q,m as X,i as R,j as f,n as o,p as ee,q as G,s as J,r as b,S as te,R as m,G as se,B as ae,I as N,J as U,ae as x,k as d,t as C,U as D,F as S,l as $,V as g,W as oe,Y as le,$ as ne,af as ie,z as F,a1 as H,Z as de,a0 as I,H as re,D as ue}from"./index.90dc39b8.js";import{_ as A}from"./FormField.c641b78f.js";import{_ as ce}from"./NotificationBarInCard.8078af59.js";const me={class:"space-y-3"},fe={__name:"UpdateBoxModal",props:{title:{type:String,required:!0},button:{type:String,default:"info"},buttonLabel:{type:String,default:"Done"},hasCancel:Boolean,modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue","cancel","confirm"],setup(y,{emit:r}){const v=y,p=B({get:()=>v.modelValue,set:t=>r("update:modelValue",t)}),w=t=>{p.value=!1,r(t)},E=()=>w("confirm"),_=()=>w("cancel");return window.addEventListener("keydown",t=>{t.key==="Escape"&&p.value&&_()}),(t,O)=>k((l(),u(J,{onOverlayClick:_},{default:i(()=>[k(n(G,{class:"shadow-lg max-h-modal w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12 z-50","is-modal":""},{footer:i(()=>[n(K,null,{default:i(()=>[n(V,{label:y.buttonLabel,color:y.button,onClick:E},null,8,["label","color"])]),_:1})]),default:i(()=>[n(Q,{title:y.title},{default:i(()=>[y.hasCancel?(l(),u(V,{key:0,icon:e(X),color:"whiteDark",small:"","rounded-full":"",onClick:R(_,["prevent"])},null,8,["icon","onClick"])):f("",!0)]),_:1},8,["title"]),o("div",me,[ee(t.$slots,"default")])]),_:3},512),[[L,e(p)]])]),_:3},512)),[[L,e(p)]])}},pe={key:0,role:"status"},_e=["onSubmit"],he={class:"block"},ge={class:"text-xl font-bold text-white float-left"},ye=o("label",{class:"mb-2 last:mb-0 text-sm font-mediumtext-bold block font-bold"},"Cover photo",-1),ve={class:"mt-1 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6"},we={class:"space-y-1 text-center"},be=["src","alt"],xe={key:1},ke=o("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[o("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ve=[ke],Ue={class:"flex text-sm text-gray-600"},Ce={for:"file-upload",class:"relative cursor-pointer rounded-md bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500"},Se=o("span",null,"Upload a file",-1),$e=o("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1),Ae={class:"flex items-start"},Be={class:"flex items-center h-5"},Ee=o("div",{class:"ml-3 text-sm"},[o("label",{for:"status",class:"font-medium text-gray-700"},"Active")],-1),Me={key:2,class:"flex items-start"},Pe={class:"flex items-center h-5"},je=o("div",{class:"ml-3 text-sm"},[o("label",{for:"is_admin",class:"font-medium text-gray-700"},"Is Admin")],-1),Ie={key:3,class:"flex items-start mt-6"},Oe={class:"flex items-center h-5"},Le=o("div",{class:"ml-3 text-sm"},[o("label",{for:"is_super_admin",class:"font-medium text-gray-700"},"IS Super Admin")],-1),Ne={class:"px-6 py-5 text-right sm:px-6"},Re={__name:"UserView",setup(y){const r=ae(),v=ue(),p=B(()=>m.state.currentUser.loading),w=B(()=>m.state.currentUser.data),E=B(()=>m.state.user.data),_=b(!1);let t=b({id:"",name:"",password:"",password_confirmation:"",is_admin:!1,status:!1,email:null,image_url:null,is_super_admin:!1,phone:"",day_left:""});te(()=>m.state.currentUser.data,(c,s)=>{t.value={...JSON.parse(JSON.stringify(c)),status:!!c.status}}),r.params.id&&m.dispatch("getUserManagment",r.params.id);function O(c){const s=c.target.files[0],a=new FileReader;a.onload=()=>{t.value.image=a.result,t.value.image_url=a.result,c.target.value=""},a.readAsDataURL(s)}let h=b("");function z(){let c="created";t.value.id&&(c="updated"),m.dispatch("createUser",{...t.value}).then(({data:s})=>{m.commit("notify",{type:"success",message:"User was successfully "+c}),v.push({name:"UserView",params:{id:s.data.id}})}).catch(s=>{p.value=!1,s.response.status===422&&(h.value=s.response.data.errors)})}const q=b(!0),W=b(0),T=["info"];function Y(){m.dispatch("getUsers"),v.push("/users")}function Z(){v.push("/users/create").then(()=>{window.location.reload(!0)})}return m.dispatch("getUser"),(c,s)=>e(E).is_admin==1?(l(),u(se,{key:0},{default:i(()=>[n(re,null,{default:i(()=>[e(r).params.id?(l(),u(N,{key:0,icon:e(U),title:"Edit User",class:"font-bold",main:""},{default:i(()=>[e(r).params.id?(l(),u(V,{key:0,target:"_blank",icon:e(x),label:"Update Password",color:"contrast","rounded-full":"",small:"",onClick:s[0]||(s[0]=a=>_.value=!0)},null,8,["icon"])):f("",!0),n(V,{target:"_blank",icon:e(U),label:"Add User",color:"contrast","rounded-full":"",small:"",onClick:Z},null,8,["icon"])]),_:1},8,["icon"])):(l(),u(N,{key:1,icon:e(U),title:"Add user",class:"font-bold",main:""},null,8,["icon"])),n(G,{class:"shadow-xl"},{default:i(()=>[e(p)?(l(),d("div",pe,[n(J)])):(l(),d("form",{key:1,onSubmit:R(z,["prevent"]),autocomplete:"off"},[n(ce,{color:T[W.value],"is-placed-with-header":q.value},{default:i(()=>[o("div",he,[o("span",null,[o("h1",ge,C(e(r).params.id?"Edit user":"Add user"),1)]),n(V,{class:"w-[200px] float-left sm:ssm:msm:mt-3 md:float-right lg:float-right",target:"_blank",icon:e(U),label:"Users",color:"contrast","rounded-full":"",small:"",onClick:Y},null,8,["icon"])])]),_:1},8,["color","is-placed-with-header"]),Object.keys(e(h)).length?(l(),u(D,{key:0,class:"flex-col items-stretch text-sm"},{default:i(()=>[(l(!0),d(S,null,$(Object.keys(e(h)),(a,M)=>(l(),d("div",{key:M},[(l(!0),d(S,null,$(e(h)[a]||[],(P,j)=>(l(),d("div",{key:j}," * "+C(P),1))),128))]))),128))]),_:1})):f("",!0),n(A,{label:"Personal Information"},{default:i(()=>[n(g,{modelValue:e(t).name,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).name=a),icon:e(oe),placeholder:"First name"},null,8,["modelValue","icon"]),n(g,{modelValue:e(t).email,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).email=a),type:"email",icon:e(le),autocomplete:"off",placeholder:"Email address"},null,8,["modelValue","icon"])]),_:1}),o("div",null,[ye,o("div",ve,[o("div",we,[e(t).image_url?(l(),d("img",{key:0,src:e(t).image_url,alt:e(t).name,class:"w-64 h-48 object-cover transition-all rounded-md transform hover:scale-125"},null,8,be)):(l(),d("span",xe,Ve)),o("div",Ue,[o("label",Ce,[Se,o("input",{onChange:O,id:"file-upload",name:"file-upload",type:"file",class:"sr-only"},null,32)])]),$e])])]),n(ne),n(fe,{modelValue:_.value,"onUpdate:modelValue":s[5]||(s[5]=a=>_.value=a),"has-cancel":""},{default:i(()=>[n(ie),Object.keys(e(h)).length?(l(),u(D,{key:0,class:"flex-col items-stretch text-sm"},{default:i(()=>[(l(!0),d(S,null,$(Object.keys(e(h)),(a,M)=>(l(),d("div",{key:M},[(l(!0),d(S,null,$(e(h)[a]||[],(P,j)=>(l(),d("div",{key:j}," * "+C(P),1))),128))]))),128))]),_:1})):f("",!0),e(r).params.id?(l(),u(A,{key:1,label:"Personal Information"},{default:i(()=>[n(g,{modelValue:e(t).password,"onUpdate:modelValue":s[3]||(s[3]=a=>e(t).password=a),icon:e(x),type:"password",autocomplete:"off",placeholder:" Enter password"},null,8,["modelValue","icon"]),n(g,{modelValue:e(t).password_confirmation,"onUpdate:modelValue":s[4]||(s[4]=a=>e(t).password_confirmation=a),type:"password",icon:e(x),placeholder:"Enter password again"},null,8,["modelValue","icon"]),o("button",{type:"submit",class:F([e(H),"text-white"])}," Update ",2)]),_:1})):f("",!0)]),_:1},8,["modelValue"]),e(r).params.id?f("",!0):(l(),u(A,{key:1,label:"Personal Information"},{default:i(()=>[n(g,{modelValue:e(t).password,"onUpdate:modelValue":s[6]||(s[6]=a=>e(t).password=a),icon:e(x),type:"password",autocomplete:"off",placeholder:" Enter password"},null,8,["modelValue","icon"]),n(g,{modelValue:e(t).password_confirmation,"onUpdate:modelValue":s[7]||(s[7]=a=>e(t).password_confirmation=a),type:"password",icon:e(x),placeholder:"Enter password again"},null,8,["modelValue","icon"])]),_:1})),n(A,null,{default:i(()=>[n(g,{type:"tel",name:"phone",id:"phone",icon:e(de),modelValue:e(t).phone,"onUpdate:modelValue":s[8]||(s[8]=a=>e(t).phone=a),placeholder:"Enter  phone",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm rounded-md"},null,8,["icon","modelValue"])]),_:1}),o("div",Ae,[o("div",Be,[k(o("input",{id:"status",name:"status",type:"checkbox","onUpdate:modelValue":s[9]||(s[9]=a=>e(t).status=a),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[I,e(t).status]])]),Ee]),e(w).is_super_admin===1?(l(),d("div",Me,[o("div",Pe,[k(o("input",{id:"status",name:"status",type:"checkbox","onUpdate:modelValue":s[10]||(s[10]=a=>e(t).is_admin=a),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[I,e(t).is_admin]])]),je])):f("",!0),e(w).is_super_admin===1?(l(),d("div",Ie,[o("div",Oe,[k(o("input",{id:"is_super_admin",name:"is_super_admin",type:"checkbox","onUpdate:modelValue":s[11]||(s[11]=a=>e(t).is_super_admin=a),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,512),[[I,e(t).is_super_admin]])]),Le])):f("",!0),o("div",Ne,[o("button",{type:"submit",class:F([e(H),"text-white"])},C(e(r).params.id?"Update":"Save"),3)])],40,_e))]),_:1})]),_:1})]),_:1})):f("",!0)}};export{Re as default};
