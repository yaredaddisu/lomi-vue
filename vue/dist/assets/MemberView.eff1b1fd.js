import{N as W,b as n,k as r,n as s,z as x,w as b,v as w,O as A,j as C,P as J,Q as q,c as O,R as p,r as _,S as z,d as y,e as m,f as l,u as t,I as S,T as Y,g as T,J as V,q as Q,s as X,t as P,U as Z,F as U,l as I,V as f,W as L,X as K,Y as ee,Z as te,$ as se,a0 as ae,a1 as oe,i as le,H as ie,G as ne,B as re,D as de}from"./index.90dc39b8.js";import{_ as me}from"./NotificationBarInCard.8078af59.js";import{_ as g}from"./FormField.c641b78f.js";const ue={name:"Camera",props:["isPhotoTaken"],data(){return{isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,link:"#"}},computed:{isPhotoTaken(){return this.isPhotoTaken}},methods:{toggleCamera(){this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement(){this.isLoading=!0;const u=window.constraints={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(u).then(i=>{this.isLoading=!1,this.$refs.camera.srcObject=i}).catch(i=>{this.isLoading=!1,alert("May the browser didn't support or there is some errors.")})},stopCameraStream(){this.$refs.camera.srcObject.getTracks().forEach(i=>{i.stop()})},takePhoto(){this.isPhotoTaken||(this.isShotPhoto=!0,setTimeout(()=>{this.isShotPhoto=!1},50)),this.isPhotoTaken=!this.isPhotoTaken,this.$refs.canvas.getContext("2d").drawImage(this.$refs.camera,0,0,450,337.5)},downloadImage(){const u=document.getElementById("downloadPhoto"),i=document.getElementById("photoTaken").toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");u.setAttribute("href",i)}}},E=u=>(J("data-v-1f3837bc"),u=u(),q(),u),ce={id:"app",class:"web-camera-container"},he={class:"camera-button"},pe={key:0},fe={key:1},_e={class:"camera-loading"},ge=E(()=>s("ul",{class:"loader-circle"},[s("li"),s("li"),s("li")],-1)),be=[ge],ke=["height"],ve=["height"],we={key:1,class:"camera-shoot"},ye=E(()=>s("img",{src:"https://img.icons8.com/material-outlined/50/000000/camera--v2.png"},null,-1)),xe=[ye],Ce={key:2,class:"camera-download"};function Ve(u,i,k,M,e,d){return n(),r("div",ce,[s("div",he,[s("button",{type:"button",class:x(["button is-rounded",{"is-primary":!e.isCameraOpen,"is-danger":e.isCameraOpen}]),onClick:i[0]||(i[0]=(...h)=>d.toggleCamera&&d.toggleCamera(...h))},[e.isCameraOpen?(n(),r("span",fe,"Close Camera")):(n(),r("span",pe,"Open Camera"))],2)]),b(s("div",_e,be,512),[[w,e.isCameraOpen&&e.isLoading]]),e.isCameraOpen?b((n(),r("div",{key:0,class:x(["camera-box",{flash:e.isShotPhoto}])},[s("div",{class:x(["camera-shutter",{flash:e.isShotPhoto}])},null,2),b(s("video",{ref:"camera",width:450,height:337.5,autoplay:""},null,8,ke),[[w,!d.isPhotoTaken]]),b(s("canvas",{id:"photoTaken",ref:"canvas",width:450,height:337.5},null,8,ve),[[w,d.isPhotoTaken]]),b(s("input",{type:"hidden","onUpdate:modelValue":i[1]||(i[1]=h=>d.isPhotoTaken=h),name:"",id:""},null,512),[[A,d.isPhotoTaken]])],2)),[[w,!e.isLoading]]):C("",!0),e.isCameraOpen&&!e.isLoading?(n(),r("div",we,[s("button",{type:"button",class:"button",onClick:i[2]||(i[2]=(...h)=>d.takePhoto&&d.takePhoto(...h))},xe)])):C("",!0),d.isPhotoTaken&&e.isCameraOpen?(n(),r("div",Ce,[s("a",{id:"downloadPhoto",download:"my-photo.jpg",class:"button",role:"button",onClick:i[3]||(i[3]=(...h)=>d.downloadImage&&d.downloadImage(...h))}," Download ")])):C("",!0)])}const Pe=W(ue,[["render",Ve],["__scopeId","data-v-1f3837bc"]]),Me={class:"grid lg:grid-cols-1 grid-cols-2"},Oe={key:0,role:"status"},Se=["onSubmit"],Te={class:"block"},Ue={class:"text-xl font-bold text-white float-left"},Ie=s("label",{class:"mb-2 last:mb-0 text-sm font-mediumtext-bold block font-bold"},"Cover photo",-1),Le={class:"mt-1 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6"},Ae={class:"space-y-1 text-center"},Ee=["src","alt"],je={key:1},Be=s("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[s("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),$e=[Be],Fe={class:"flex text-sm text-gray-600"},Ne={for:"file-upload",class:"relative cursor-pointer rounded-md bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500"},De=s("span",null,"Upload a file",-1),Re=s("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1),He={class:"mt-3 grid grid-cols-2"},Ge={class:"grid grid-cols-3 sm:grid-cols-1 ssm:grid-cols-1 msm:grid-cols-1"},We={class:"flex items-start mt-6"},Je={class:"flex items-center h-5"},qe=s("div",{class:"ml-3 text-sm"},[s("label",{for:"status",class:"font-medium"},"Active")],-1),ze={class:"px-6 py-5 text-right sm:px-6"},Ze={__name:"MemberView",setup(u){const i=re(),k=de(),M=O(()=>p.state.currentMember.loading);O(()=>p.state.work.data),p.dispatch("getWorks"),_(!1);let e=_({id:"",firstname:"",lastname:"",phone:"",address:"",status:!1,email:null,price:"0",priceUpdate:"0",image_url:null,image:null,day_left:null,gender:null,questions:[],role:"",work:"",work_time:""});_({plus:"+",minus:"-",radio:" "});const d=["Male","Female"];_([]);function h(c){const a=c.target.files[0],o=new FileReader;o.onload=()=>{e.value.image=o.result,e.value.image_url=o.result,c.target.value=""},o.readAsDataURL(a)}i.params.id&&p.dispatch("getMember",i.params.id),z(()=>p.state.currentMember.data,(c,a)=>{e.value={...JSON.parse(JSON.stringify(c)),status:!!c.status}});let v=_("");function j(){let c="created";e.value.id&&(c="updated"),p.dispatch("saveMember",{...e.value}).then(({data:a})=>{p.commit("notify",{type:"success",message:"Member was successfully "+c}),k.push({name:"MemberView",params:{id:a.data.id}})}).catch(a=>{a.response.status===422&&(v.value=a.response.data.errors)})}function B(){k.push("/members/create").then(()=>{window.location.reload(!0)})}function $(){p.dispatch("getMembers"),k.push("/members")}const F=_(!0),N=_(0),D=["info"];return p.dispatch("getUser"),(c,a)=>(n(),y(ne,null,{default:m(()=>[l(ie,null,{default:m(()=>[s("div",Me,[t(i).params.id?(n(),y(S,{key:0,icon:t(Y),title:"Edit member",class:"font-bold",main:""},{default:m(()=>[l(T,{target:"_blank",icon:t(V),label:"Add member",color:"contrast","rounded-full":"",small:"",onClick:B},null,8,["icon"])]),_:1},8,["icon"])):(n(),y(S,{key:1,icon:t(V),title:"Add member",class:"font-bold",main:""},null,8,["icon"]))]),l(Q,{class:"shadow-xl"},{default:m(()=>[t(M)?(n(),r("div",Oe,[l(X)])):(n(),r("form",{key:1,onSubmit:le(j,["prevent"])},[l(me,{color:D[N.value],"is-placed-with-header":F.value},{default:m(()=>[s("div",Te,[s("span",null,[s("h1",Ue,P(t(i).params.id?"Edit member":"Add member"),1)]),l(T,{class:"w-[200px] float-left sm:ssm:msm:mt-3 md:float-right lg:float-right",target:"_blank",icon:t(V),label:"Members",color:"contrast","rounded-full":"",small:"",onClick:$},null,8,["icon"])])]),_:1},8,["color","is-placed-with-header"]),Object.keys(t(v)).length?(n(),y(Z,{key:0,class:"flex-col items-stretch text-sm"},{default:m(()=>[(n(!0),r(U,null,I(Object.keys(t(v)),(o,R)=>(n(),r("div",{key:R},[(n(!0),r(U,null,I(t(v)[o]||[],(H,G)=>(n(),r("div",{key:G}," * "+P(H),1))),128))]))),128))]),_:1})):C("",!0),l(g,{label:"Personal Information"},{default:m(()=>[l(f,{modelValue:t(e).firstname,"onUpdate:modelValue":a[0]||(a[0]=o=>t(e).firstname=o),icon:t(L),placeholder:"First name"},null,8,["modelValue","icon"]),l(f,{modelValue:t(e).lastname,"onUpdate:modelValue":a[1]||(a[1]=o=>t(e).lastname=o),icon:t(L),placeholder:"Last name"},null,8,["modelValue","icon"])]),_:1}),l(g,null,{default:m(()=>[l(f,{modelValue:t(e).address,"onUpdate:modelValue":a[2]||(a[2]=o=>t(e).address=o),icon:t(K),placeholder:"Address "},null,8,["modelValue","icon"]),l(f,{modelValue:t(e).email,"onUpdate:modelValue":a[3]||(a[3]=o=>t(e).email=o),type:"email",icon:t(ee),placeholder:"Email address"},null,8,["modelValue","icon"])]),_:1}),s("div",null,[Ie,s("div",Le,[s("div",Ae,[t(e).image_url?(n(),r("img",{key:0,src:t(e).image_url,alt:t(e).name,class:"w-64 h-48 object-cover transition-all rounded-md transform hover:scale-125"},null,8,Ee)):(n(),r("span",je,$e)),s("div",Fe,[s("label",Ne,[De,s("input",{onChange:h,id:"file-upload",name:"file-upload",type:"file",class:"sr-only"},null,32)])]),Re])]),l(Pe)]),s("div",He,[l(g,{label:"Phone number",class:"mt-5",help:"Enter member phone number"},{default:m(()=>[l(f,{icon:t(te),modelValue:t(e).phone,"onUpdate:modelValue":a[4]||(a[4]=o=>t(e).phone=o),type:"tel",placeholder:"Your phone number"},null,8,["icon","modelValue"])]),_:1}),l(g,{label:"Gender",class:"mt-5"},{default:m(()=>[l(f,{id:"gender",name:"gender",modelValue:t(e).gender,"onUpdate:modelValue":a[5]||(a[5]=o=>t(e).gender=o),value:c.selected,options:d},null,8,["modelValue","value"])]),_:1})]),s("div",Ge,[l(g,{label:"Role",class:"mt-5"},{default:m(()=>[l(f,{id:"role",name:"role",modelValue:t(e).role,"onUpdate:modelValue":a[6]||(a[6]=o=>t(e).role=o),placeholder:"Member role"},null,8,["modelValue"])]),_:1}),l(g,{label:"Work field",class:"mt-5"},{default:m(()=>[l(f,{id:"work",name:"work",modelValue:t(e).work,"onUpdate:modelValue":a[7]||(a[7]=o=>t(e).work=o),placeholder:"Member work filed"},null,8,["modelValue"])]),_:1}),l(g,{label:"Work time",class:"mt-5"},{default:m(()=>[l(f,{id:"work_time",name:"work_time",modelValue:t(e).work_time,"onUpdate:modelValue":a[8]||(a[8]=o=>t(e).work_time=o),placeholder:"Member work time "},null,8,["modelValue"])]),_:1})]),b(s("input",{type:"hidden","onUpdate:modelValue":a[9]||(a[9]=o=>t(e).invoice_id=o)},null,512),[[A,t(e).invoice_id]]),l(se),s("div",We,[s("div",Je,[b(s("input",{id:"status",name:"status",type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=o=>t(e).status=o),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 rounded"},null,512),[[ae,t(e).status]])]),qe]),s("div",ze,[s("button",{type:"submit",class:x([t(oe),"text-white"])},P(t(i).params.id?"Update":"Save"),3)])],40,Se))]),_:1})]),_:1})]),_:1}))}};export{Ze as default};
