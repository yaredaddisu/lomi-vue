import{c as y,b as i,k as m,w as J,aB as K,u as n,n as s,ai as Q,t as w,z as D,aC as X,r as k,S as j,f as o,g as F,j as R,d as B,e as u,aD as Z,aE as ee,a6 as te,q as P,x as q,A,D as I,R as b,_ as M,U as L,l as $,F as C,V,W as T,Y as U,i as z,B as oe,N as se,ae,aF as le,aG as ne,H as re,$ as ie,G as ue,I as de,a as ce,ac as _}from"./index.90dc39b8.js";import{_ as x}from"./FormField.c641b78f.js";const me=["type","name","value"],pe=s("span",{class:"check"},null,-1),fe={class:"pl-2"},_e={__name:"FormCheckRadio",props:{name:{type:String,required:!0},type:{type:String,default:"checkbox",validator:e=>["checkbox","radio","switch"].includes(e)},label:{type:String,default:null},modelValue:{type:[Array,String,Number,Boolean],default:null},inputValue:{type:[String,Number,Boolean],required:!0}},emits:["update:modelValue"],setup(e,{emit:r}){const t=e,p=y({get:()=>t.modelValue,set:f=>{r("update:modelValue",f)}}),a=y(()=>t.type==="radio"?"radio":"checkbox");return(f,d)=>(i(),m("label",{class:D(e.type)},[J(s("input",{"onUpdate:modelValue":d[0]||(d[0]=c=>Q(p)?p.value=c:null),type:n(a),name:e.name,value:e.inputValue},null,8,me),[[K,n(p)]]),pe,s("span",fe,w(e.label),1)],2))}},he={class:"flex items-stretch justify-start relative"},ge={class:"inline-flex"},ye=["accept"],be={key:0,class:"px-4 py-2 bg-gray-100 dark:bg-slate-800 border-gray-200 dark:border-slate-700 border rounded-r"},we={class:"text-ellipsis line-clamp-1"},ve={__name:"FormFilePicker",props:{modelValue:{type:[Object,File,Array],default:null},label:{type:String,default:null},icon:{type:String,default:X},accept:{type:String,default:null},color:{type:String,default:"info"},isRoundIcon:Boolean},emits:["update:modelValue"],setup(e,{emit:r}){const t=e,p=k(null),a=k(t.modelValue),f=y(()=>!t.isRoundIcon&&a.value),d=y(()=>t.modelValue);j(d,l=>{a.value=l,l||(p.value.input.value=null)});const c=l=>{const h=l.target.files||l.dataTransfer.files;a.value=h[0],r("update:modelValue",a.value)};return(l,h)=>(i(),m("div",he,[s("label",ge,[o(F,{as:"a",class:D({"w-12 h-12":e.isRoundIcon,"rounded-r-none":n(f)}),"icon-size":e.isRoundIcon?24:void 0,label:e.isRoundIcon?null:e.label,icon:e.icon,color:e.color,"rounded-full":e.isRoundIcon},null,8,["class","icon-size","label","icon","color","rounded-full"]),s("input",{ref_key:"root",ref:p,type:"file",class:"absolute top-0 left-0 w-full h-full opacity-0 outline-none cursor-pointer -z-1",accept:e.accept,onInput:c},null,40,ye)]),n(f)?(i(),m("div",be,[s("span",we,w(a.value.name),1)])):R("",!0)]))}},xe=["src","alt"],Ve={class:"space-y-3 text-center md:text-left lg:mx-12"},ke={class:"flex justify-center md:block"},Be={class:"text-2xl"},$e=q(" Hello, "),Ce=q("! "),Se={class:"flex justify-center md:block"},Ue={__name:"UserCard",props:{image:Object},setup(e){const r=A();I(),r.dispatch("getUser");const t=y(()=>r.state.user.data),p=k(!1);return(a,f)=>(i(),B(P,null,{default:u(()=>[o(te,{type:"justify-around lg:justify-center"},{default:u(()=>[s("img",{src:n(t).image_url,alt:n(t).name,class:"rounded-full h-[300px] w-[300px]"},null,8,xe),s("div",Ve,[s("div",ke,[o(_e,{modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=d=>p.value=d),name:"notifications-switch",type:"switch",label:"Notifications","input-value":!0},null,8,["modelValue"])]),s("h1",Be,[$e,s("b",null,w(n(t).name),1),Ce]),s("p",null,[s("b",null,w(n(t).email),1)]),s("div",Se,[o(Z,{label:"Verified",color:"info",icon:n(ee)},null,8,["icon"])])])]),_:1})]),_:1}))}},Fe=s("label",{class:"block text-sm font-medium text-gray-700"},null,-1),Re={class:"mt-1 flex items-center"},Pe=["src","alt"],qe={key:1,class:"flex items-center justify-center h-12 w-12 rounded-full overflow-hidden bg-gray-100"},Ie=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-[80%] w-[80%] text-gray-300",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})],-1),Ne=[Ie],De={type:"button",class:"relative overflow-hidden ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},je=q(" Change "),Ae={__name:"ImageModel",setup(e){const r=oe();I();const t=y(()=>b.state.user.data);j(()=>b.state.user.data,(d,c)=>{t.value={...JSON.parse(JSON.stringify(d))}}),r.params.id&&b.dispatch("getUser",r.params.id);function p(d){const c=d.target.files[0],l=new FileReader;l.onload=()=>{t.value.image=l.result,t.value.image_url=l.result,d.target.value=""},l.readAsDataURL(c)}const a=k({});function f(){t.value.id&&b.dispatch("updateProfile",t.value).then(d=>{d.data===200&&b.dispatch("getUser")})}return b.dispatch("getUser"),(d,c)=>(i(),B(P,{"is-form":"",onSubmit:z(f,["prevent"])},{footer:u(()=>[o(M,null,{default:u(()=>[o(F,{color:"info",type:"submit",label:"Update Profile"})]),_:1})]),default:u(()=>[Object.keys(a.value).length?(i(),B(L,{key:0,class:"flex-col items-stretch text-sm"},{default:u(()=>[(i(!0),m(C,null,$(Object.keys(a.value),(l,h)=>(i(),m("div",{key:h},[(i(!0),m(C,null,$(a.value[l]||[],(v,S)=>(i(),m("div",{key:S}," * "+w(v),1))),128))]))),128))]),_:1})):R("",!0),o(x,{label:"Image",help:"Upload Here"},{default:u(()=>[s("div",null,[Fe,s("div",Re,[n(t).image_url?(i(),m("img",{key:0,src:n(t).image_url,alt:n(t).title,class:"w-64 h-48 object-cover rounded:md"},null,8,Pe)):(i(),m("span",qe,Ne)),s("button",De,[s("input",{type:"file",onChange:p,class:"absolute left-0 top-0 right-0 bottom-0 opacity-0 cursor-pointer"},null,32),je])])])]),_:1}),o(x,{label:"Name",help:"Required. Your name"},{default:u(()=>[o(V,{modelValue:n(t).name,"onUpdate:modelValue":c[0]||(c[0]=l=>n(t).name=l),icon:n(T),name:"username",required:"",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1}),o(x,{label:"E-mail",help:"Required. Your e-mail"},{default:u(()=>[o(V,{modelValue:n(t).email,"onUpdate:modelValue":c[1]||(c[1]=l=>n(t).email=l),icon:n(U),type:"email",name:"email",required:"",autocomplete:"email"},null,8,["modelValue","icon"])]),_:1}),o(x,{label:"Phone number",help:"Required. Your Phone number"},{default:u(()=>[o(V,{modelValue:n(t).phone,"onUpdate:modelValue":c[2]||(c[2]=l=>n(t).phone=l),icon:n(U),type:"phone",name:"phone",required:"",autocomplete:"phone"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"]))}},Me={components:{ImageModel:Ae,Alert:L,mdiAccount:T,mdiMail:U,mdiAsterisk:ae,mdiFormTextboxPassword:le,mdiGithub:ne,SectionMain:re,CardBox:P,BaseDivider:ie,FormField:x,FormControl:V,FormFilePicker:ve,BaseButton:F,BaseButtons:M,UserCard:Ue,LayoutAuthenticated:ue,SectionTitleLineWithButton:de},data(){return{password_current:" ",password:" ",password_confirmation:" ",notifmsg:"",notifupdate:""}},setup(){const e=A(),r=I();function t(){e.dispatch("logout").then(()=>{r.push({name:"Login"})})}return e.dispatch("getUser"),{userData:y(()=>e.state.user.data),logout:t}},methods:{submitPass(){ce.put("/change-password",{password_current:this.password_current,password:this.password,password_confirmation:this.password_confirmation}).then(e=>{e.data.error?this.$store.commit("notify",{type:"error",message:e.data.error}):this.$store.commit("notify",{type:"success",message:e.data.success})}).catch(e=>{e.response.status===422&&(this.notifmsg=e.response.data.errors)}),this.$store.dispatch("getUser")}}},Le={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Te={key:0};function ze(e,r,t,p,a,f){const d=_("SectionTitleLineWithButton"),c=_("UserCard"),l=_("ImageModel"),h=_("FormControl"),v=_("FormField"),S=_("BaseDivider"),O=_("BaseButton"),H=_("BaseButtons"),Y=_("CardBox"),W=_("SectionMain"),E=_("LayoutAuthenticated");return i(),B(E,null,{default:u(()=>[o(W,null,{default:u(()=>[o(d,{icon:e.mdiAccount,title:"User Profile",main:""},null,8,["icon"]),o(c,{class:"mb-6"}),s("div",Le,[o(l),o(Y,{"is-form":"",onSubmit:z(f.submitPass,["prevent"])},{footer:u(()=>[o(H,null,{default:u(()=>[o(O,{type:"submit",color:"info",label:"Change Password"})]),_:1})]),default:u(()=>[a.notifmsg?(i(),m("div",Te,[(i(!0),m(C,null,$(a.notifmsg,(g,G)=>(i(),m("div",{key:G,class:"bg-red-500 text-white rounded font-bold mb-4 shadow-lg py-2 px-4 pr-0"},[(i(!0),m(C,null,$(g,N=>(i(),m("p",{key:N,class:"text-sm"},w(N),1))),128))]))),128))])):R("",!0),o(v,{label:"Current password",help:"Required. Your current password"},{default:u(()=>[o(h,{modelValue:a.password_current,"onUpdate:modelValue":r[0]||(r[0]=g=>a.password_current=g),icon:e.mdiAsterisk,name:"password_current",type:"password",required:"",autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1}),o(S),o(v,{label:"New password",help:"Required. New password"},{default:u(()=>[o(h,{modelValue:a.password,"onUpdate:modelValue":r[1]||(r[1]=g=>a.password=g),icon:e.mdiFormTextboxPassword,name:"password",type:"password",required:"",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),o(v,{label:"Confirm password",help:"Required. New password one more time"},{default:u(()=>[o(h,{modelValue:a.password_confirmation,"onUpdate:modelValue":r[2]||(r[2]=g=>a.password_confirmation=g),icon:e.mdiFormTextboxPassword,name:"password_confirmation",type:"password",required:"",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"])])]),_:1})]),_:1})}const Ye=se(Me,[["render",ze]]);export{Ye as default};
